<script type="text/javascript">
  $( document ).ready( function(num){
    init()
    $( '#add-button' ).click( function( e ){
      e.preventDefault()
      num++
      updateNum()
      addEvent()
      toggleButtons()
    })
    $( '#subtract-button' ).click( function( e ){
      e.preventDefault()
      removeEvent()
      num--
      updateNum()
      toggleButtons()
    })
    function init(){
      num = 1
      $( '#meeting_meeting_instances' ).val(num)
      $( '#2, #3' ).hide()
      $( '#subtract-button' ).hide()
    }
    function toggleButtons(){
      switch(num) {
        case 1:
          $( '#add-button' ).show()
          $( '#subtract-button' ).hide()
            break;
        case 3:
          $( '#add-button' ).hide()
          $( '#subtract-button' ).show()
            break;
        default:
          $( '#add-button' ).show()
          $( '#subtract-button' ).show()
      }
    }
    function addEvent(){ $( '#' + num.toString() ).show() }
    function removeEvent(){ $( '#' + num.toString() ).hide() }
    function updateNum(){ $( '#class_page_class_instances' ).val(num) }
  })
</script>

<%= form_for(class_page) do |f| %>
  <% if class_page.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(class_page.errors.count, "error") %> prohibited this class_page from being saved:</h2>

      <ul>
      <% class_page.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.file_field :class_photo %>
  </div>

  <div class="field">
    <%= f.label :class_title %>
    <%= f.text_field :class_title %>
  </div>

  <div class="field">
    Recurring Event? &nbsp;<%= f.check_box :recurring_event %>
  </div>

  <div class="field">
    <%= f.label :class_content %>
    <%= f.text_area :class_content, style: "width: 600px; height: 500px; max-width: 100%" %>
  </div>

  <div class="field">
    <%= f.label :order_position %>
    <%= f.number_field :order_position %>
  </div>

  <!-- <div class="field">
    <%= f.label :start_time %>
    <%= f.datetime_select :start_time, ampm: true %>
  </div> -->





  <% if !current_page?(controller: 'class_pages', action: 'new') %>
    <div class="field" id="1">
      <%= f.label "reg start time" %>
      <%= f.datetime_select :start_time, ampm: true %>
    </div>
  <% else %>
    <div class="field" id="1">
      <%= f.label "recurring start time" %>
      <%= f.datetime_select :start_time_1, ampm: true %>
    </div>
  <% end %>

  <!-- additional start times -->

    <div class="field" id="2">
      <%= f.label :start_time_2 %>
      <%= f.datetime_select :start_time_2, ampm: true %>
    </div>

    <div class="field" id="3">
      <%= f.label :start_time_3 %>
      <%= f.datetime_select :start_time_3, ampm: true %>
    </div>

    <button id="add-button"><h4>+</h4></button>
    <button id="subtract-button"><h4>-</h4></button>

    <div class="hidden-element" >
      <%= f.label :class_instances %>
      <%= f.text_field :class_instances %>
    </div>



  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
